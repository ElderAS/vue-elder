(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{164:function(e,t,n){},165:function(e,t,n){},166:function(e,t,n){},288:function(e,t,n){"use strict";var i=n(164);n.n(i).a},289:function(e,t,n){"use strict";var i=n(165);n.n(i).a},290:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=[],a="M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z";t.definition={prefix:"fas",iconName:"trash",icon:[448,512,i,"f1f8",a]},t.faTrash=t.definition,t.prefix="fas",t.iconName="trash",t.width=448,t.height=512,t.ligatures=i,t.unicode="f1f8",t.svgPathData=a},291:function(e,t,n){"use strict";var i=n(166);n.n(i).a},297:function(e,t,n){"use strict";n.r(t);var i=n(104);n(86),n(70),n(103),n(90),n(174),n(175),n(112);function a(e){return function(){return["",!0,"true"].includes(this.$attrs[e])}}function r(e){return JSON.parse(JSON.stringify(e))}n(71);var l={props:{value:Number,bytes:Number,current:{type:Number,default:1},total:{type:Number,default:1}},computed:{hasMultiple:function(){return this.total>1},size:function(){return function(e){if(0==e)return"0 Byte";let t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t]}(this.bytes)}},filters:{floor:Math.floor}},u=(n(288),n(1)),s=Object(u.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"elder-image__uploader"},[n("div",[e._v(e._s(e._f("floor")(e.value))+" %")]),e._v(" "),n("div",{staticClass:"elder-image__uploader-bar"},[n("div",{staticClass:"elder-image__uploader-bar-value",style:{width:e.value+"%"}})]),e._v(" "),n("div",{staticClass:"elder-image__uploader-meta"},[e.hasMultiple?n("div",[e._v(e._s(e.current)+" / "+e._s(e.total))]):e._e(),e._v(" "),e.bytes?n("div",[e._v("("+e._s(e.size)+")")]):e._e()])])}),[],!1,null,null,null).exports,o=n(46),c={props:{value:Object,selected:Boolean,size:{type:String,default:"4rem"}},computed:{style:function(){return{backgroundImage:"url(".concat(this.value.url,")"),width:this.size,height:this.size}}},components:{FontAwesomeIcon:o.a}},d=(n(289),Object(u.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"elder-image__thumbnail",class:{"elder-image__thumbnail--selected":e.selected},style:e.style,on:{click:function(t){return e.$emit("click")}}},[n("div",{staticClass:"elder-image__thumbnail-delete",on:{click:function(t){return e.$emit("delete")}}},[n("FontAwesomeIcon",{attrs:{icon:"trash"}})],1)])}),[],!1,null,null,null).exports),p=n(176),h=n.n(p),f=n(58),m=n(290);f.d.add(m.faTrash);var v={counter:0,total:0,progress:0,bytes:0,result:[]},g={props:{value:[Array,Object,String],label:String,multiple:Boolean,sortable:{type:Boolean,default:!0},upload:Function,serialize:Function,size:{type:String,default:"cover"},placement:{type:String,enum:["outside","inside"]}},data:function(){return{id:null,selected:null,queue:r(v)}},computed:{isRequired:a("required"),isDisabled:a("disabled"),serializeComp:function(){return this.serialize||_.serialize},dropMessage:function(){return _.dropMessage},uploadComp:function(){return this.upload||_.upload},canUpload:function(){return!this.isDisabled&&!this.queue.total},thumbnails:{get:function(){return this.value?this.value instanceof Array?this.value:[this.value]:[]},set:function(e){this.multiple&&this.$emit("input",e)}},dropareaStyle:function(){return this.selected?{backgroundImage:"url(".concat(this.serializeComp(this.selected).url,")"),backgroundSize:this.size,backgroundOrigin:"contain"===this.size?"content-box":void 0,borderStyle:"solid",borderWidth:"1px"}:{}}},methods:{run:function(e){var t=this;e=Array.from(e).filter((function(e){return e.type.match(/image.*/)})),this.queue.total=e.length,this.queue.counter=0,this.queue.bytes=e.reduce((function(e,t){return e+t.size}),0);var n=e.map((function(){return 0}));Promise.all(e.map((function(e,i){return t.uploadComp(e,(function(e){n[i]=e,t.queue.progress=n.reduce((function(e,t){return e+t}),0)/n.length})).then((function(e){return t.queue.counter++,e}))}))).then((function(e){e&&e.length&&(t.$emit("input",t.multiple?[].concat(Object(i.a)(t.value||[]),Object(i.a)(e)):e[0]),t.resetQueue(),t.selected||t.$nextTick((function(){return t.select()})))}))},remove:function(e){var t=this;this.$emit("input",this.multiple?this.value.filter((function(t){return t!==e})):null),this.selected===e&&this.$nextTick((function(){return t.select()}))},onChange:function(e){this.run(e.target.files),this.$refs.input.value=null},onDrop:function(e){e.preventDefault(),!this.isReadonly&&e.dataTransfer.files.length&&this.run(e.dataTransfer.files)},onDragOver:function(e){e.preventDefault()},resetQueue:function(){this.queue=r(v)},select:function(e){return this.value?this.multiple&&!this.value.length?this.selected=null:this.selected=e||(this.multiple?this.value[0]:this.value):this.selected=null}},created:function(){this.id=this._uid,this.select()},components:{Uploader:s,Thumbnail:d,Draggable:h.a}},b=(n(291),Object(u.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"elder-image",class:["elder-image--"+e.placement]},[e.label?n("label",{staticClass:"elder-image__label",attrs:{for:e.id}},[e._v("\n    "+e._s(e.label)+"\n    "),e.isRequired?n("span",{staticClass:"elder-image__label-required"},[e._v("*")]):e._e()]):e._e(),e._v(" "),n("div",{staticClass:"elder-image__droparea",class:{"elder-image__droparea--selected":e.selected},style:e.dropareaStyle,on:{drop:e.onDrop,dragover:e.onDragOver}},[n("input",{attrs:{type:"text",required:e.isRequired},domProps:{value:e.value}}),e._v(" "),n("input",{ref:"input",attrs:{type:"file",accept:"image/*",disabled:!e.canUpload,multiple:e.multiple},on:{change:e.onChange}}),e._v(" "),n("div",{staticClass:"elder-image__droparea-instruction"},[e._t("drop-message",[n("div",{domProps:{innerHTML:e._s(e.dropMessage)}})])],2)]),e._v(" "),n("Draggable",{staticClass:"elder-image__thumbnails",attrs:{disabled:!e.multiple||!e.sortable},model:{value:e.thumbnails,callback:function(t){e.thumbnails=t},expression:"thumbnails"}},e._l(e.thumbnails,(function(t,i){return n("thumbnail",{key:i,attrs:{selected:e.selected===t,value:e.serializeComp(t)},on:{click:function(n){e.selected=t},delete:function(n){return e.remove(t)}}})})),1),e._v(" "),e.queue.total?n("Uploader",{attrs:{value:e.queue.progress,bytes:e.queue.bytes,current:e.queue.counter,total:e.queue.total}}):e._e()],1)}),[],!1,null,null,null).exports);const _={upload:(e,t)=>(console.warn("[vue-elder-image]: You need to setup the upload function before using this plugin"),t(50),new Promise((t,n)=>{let i=new FileReader;i.onloadend=function(){t({url:i.result,type:e.type})},i.readAsDataURL(e)})),serialize:e=>e,dropMessage:"Drag an image here or <b>browse</b> to upload."};var y={template:'<ImageComponent v-bind="$attrs" v-model="value" />',data:function(){return{value:[]}},components:{ImageComponent:b}},C=Object(u.a)(y,void 0,void 0,!1,null,null,null);t.default=C.exports}}]);